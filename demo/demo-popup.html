<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Pardot Form AJAX Handler</title>
    <link rel="stylesheet" href="./demo.css">
  </head>
  <body>

  <!--
  /****************************************************
  *  project: pardot form ajax handler                *
  *  description: demo popup                          *
  *  author: horans@gmail.com                         *
  *  url: github.com/horans/pardot-form-ajax-handler  *
  *  update: 170709                                   *
  ****************************************************/
  -->

  <main>
    <nav>
      <h1>Pardot Form AJAX Handler <small>(Demo Popup)</small></h1>
    </nav>

    <section>
      <h2>Normal popup form</h2>
      <button class="btn btn-outline-info" data-toggle="pfah-popup" data-target="#popup-form">Will Show Form</button>
      <hr>
    </section>

    <section>
      <h2>Manual popup form</h2>
      <button class="btn btn-outline-info" data-toggle="pfah-popup" data-target="#popup-form">Will NOT Show Form</button>
      <button class="btn btn-outline-info" data-toggle="pfah-popup" data-target="#popup-form">Will Show Form</button>
    </section>

    <samp>
      <div class="pfah-popup demo demo-wide" id="popup-form">
        <div class="pfah-wrapper" data-state="no">
          <i class="pfah-close-icon pfah-icon pfah-close"></i>
          <form action="http://go.pardot.com/l/285052/2018-06-15/2yqqct" class="pfah-form">
            <div class="pfah-title pfah-center">Volumen Licensing Program</div>
            <div class="pfah-desc pfah-center">Please fill out the form beloe to request a quote and we will get back to you as soon as possible.</div>
            <div class="pfah-row pfah-row-with-col">
              <div class="pfah-col">
                <label class="pfah-label">Name <sup>*</sup></label>
                <input type="text" class="pfah-input" name="fullname" placeholder="Please enter your name." />
              </div>
              <div class="pfah-col">
                <label class="pfah-label">Email <sup>*</sup></label>
                <input type="email" class="pfah-input" name="email" placeholder="Please enter a valid email adress." />
              </div>
            </div>
            <div class="pfah-row pfah-row-with-col">
              <div class="pfah-col">
                <label class="pfah-label">Number of Licenses <sup>*</sup></label>
                <input type="number" class="pfah-input" name="licenses" placeholder="1" />
              </div>
              <div class="pfah-col">
                <label class="pfah-label">Phone Number (Optional)</label>
                <input type="tel" class="pfah-input" name="phone" placeholder="1234567890" />
              </div>
            </div>
            <div class="pfah-row pfah-row-with-col">
              <div class="pfah-col">
                <label class="pfah-label">Industry (Optional)</label>
                <div class="pfah-select">
                  <select class="pfah-input" name="industry">
                    <option value="0" selected disabled>Select</option>
                    <option value="1">IT</option>
                    <option value="2">Retail</option>
                  </select>
                  <i class="pfah-select-icon pfah-icon pfah-transition"></i>
                </div>
              </div>
            </div>
            <div class="pfah-row">
              <label class="pfah-label">How can we help? (Optional)</label>
              <textarea name="description" class="pfah-input" rows="2" placeholder="Your thoughts..."></textarea>
            </div>
            <div class="pfah-row pfah-group">
              <label class="pfah-check-item">
                <input class="pfah-check-input pfah-check-required" type="checkbox" checked>
                <span class="pfah-check-icon pfah-icon"></span>
                <span class="pfah-check-label">By clicking the button, I agree to the <a href="../readme.md" target="blank">privacy policy</a> and to hear about offers or services.</span>
              </label>
            </div>
            <div class="pfah-action">
              <button type="submit" class="pfah-button pfah-transition">TALK TO US</button>
            </div>
            <div class="pfah-extra pfah-center">
              <a href="README.md" download class="pfah-close-delay">Skip and Download</a>
            </div>
          </form>
          <aside class="pfah-done pfah-transition">
            <div class="pfah-done-wrapper">
              <i class="pfah-done-icon pfah-icon"></i>
              <div class="pfah-done-heading">Thank you for contacting us.</div>
              <div class="pfah-done-text">We have received your enquiry and will respond to you soon.</div>
            </div>
          </aside>
          <aside class="pfah-error pfah-transition">
            <i class="pfah-error-icon pfah-icon"></i>
            <span class="pfah-error-text">Submission failed.Please enter the required information and try again.</span>
          </aside>
        </div>
      </div>
    </samp>
  </main>

  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="../dist/pardot-form.js"></script>

<script>
/* global $ */
// focus on input when open
$('body').on('pfah.popup', function (e, id, state) {
  var i = 'pfah-2yqqct'
  if (id === i && state === 'open') {
    setTimeout(function () {
      $('[data-id="' + i + '"]').find('[name="fullname"]').focus()
    }, 500)
  }
})

// button click event blocked
$('section:eq(1)').on('click', function (e) { e.stopPropagation() })

// manual popup
$('section:eq(1) button:eq(1)').on('click', function () {
  $(this).trigger('pfah.callpopup')
})
</script>
  </body>
</html>